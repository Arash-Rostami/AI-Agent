@keyframes shimmer-spin {
    0% {
        --shimmer-angle: 0deg;
    }
    100% {
        --shimmer-angle: 360deg;
    }
}

/*
   Property definition for CSS variable animation.
   Browser support: Chrome, Edge, Opera, Firefox 118+
*/
@property --shimmer-angle {
    syntax: "<angle>";
    initial-value: 0deg;
    inherits: false;
}

@media (min-width: 769px) {
    /*
       1. Thinking Mode Button Shimmer (Border Travel Effect)
       Mimics Magic UI Shimmer Button
    */
    #thinking-mode-btn {
        position: relative;
        background: var(--input-bg); /* Ensure solid bg */
        overflow: hidden;
        border: 1px solid transparent; /* Prepare for border override */
        border-radius: 20px; /* Match existing radius */
        z-index: 1; /* Ensure text is above */
    }

    /* The "Track" */
    #thinking-mode-btn::before {
        content: "";
        position: absolute;
        inset: -1px; /* Extend slightly outside */
        z-index: -1;
        border-radius: inherit;
        padding: 1px; /* Border width */

        /* The Conic Gradient Shimmer */
        background: conic-gradient(
            from var(--shimmer-angle),
            transparent 0%,
            transparent 30%,
            var(--primary-color) 45%,
            var(--primary-color) 55%,
            transparent 70%,
            transparent 100%
        );

        /* Masking to show only the border */
        -webkit-mask:
            linear-gradient(#fff 0 0) content-box,
            linear-gradient(#fff 0 0);
        mask:
            linear-gradient(#fff 0 0) content-box,
            linear-gradient(#fff 0 0);
        -webkit-mask-composite: xor;
        mask-composite: exclude;

        /* Animation */
        animation: shimmer-spin 3s linear infinite;
    }

    /* Optional: Add a subtle inner glow/background shimmer behind the text?
       User asked for "shimmer css" effect. The example they linked is a Border shimmer.
       We will stick to the border effect as it is cleaner.
    */

    /*
       2. Login Container Shimmer (Border Effect)
       "main div of login page" -> .login-container
    */
    .login-container {
        position: relative;
        /* We keep the existing background and shadows from login.css */
        z-index: 10;
        /* Ensure border-radius clips the pseudo-element if needed,
           but for border effect, we usually want it outside. */
    }

    /*
       Since .login-container has a specific border-radius (24px) and existing border,
       we will replace the static border with the shimmer border.
    */
    .login-container::after {
        content: "";
        position: absolute;
        inset: -2px; /* Make it wrap around the existing border */
        z-index: -1; /* Behind the card */
        border-radius: 26px; /* slightly larger than 24px container */

        /* The Shimmer Gradient */
        background: conic-gradient(
            from var(--shimmer-angle),
            transparent 20%,
            var(--primary-color) 45%, /* Use primary color for brand consistency */
            #ffffff 50%,              /* White spark center */
            var(--primary-color) 55%,
            transparent 80%
        );

        animation: shimmer-spin 4s linear infinite;
        opacity: 0.6; /* Subtle glow */
    }

    /* Dark mode adjustments */
    [data-theme="dark"] #thinking-mode-btn::before {
        background: conic-gradient(
            from var(--shimmer-angle),
            transparent 0%,
            transparent 30%,
            var(--primary-color) 45%,
            #ffffff 50%,
            var(--primary-color) 55%,
            transparent 70%,
            transparent 100%
        );
    }

    [data-theme="dark"] .login-container::after {
        background: conic-gradient(
            from var(--shimmer-angle),
            transparent 20%,
            var(--primary-color) 45%,
            #ffffff 50%,
            var(--primary-color) 55%,
            transparent 80%
        );
        opacity: 0.8; /* More visible in dark mode */
    }
}
